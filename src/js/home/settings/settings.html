<style>
    .no-border {
        border: 0px;
    }

    .border-bottom {
        border-bottom: 1px solid #ccc;
    }

    .rem-radius {
        border-radius: 0px;
    }

    .list-group-settings:hover {
        background: #5c0055;
        color: #fff;
    }

    .settings-div {
        border: #ddd 1px solid;
        padding: 10px;
    }
</style>

<div class="container">
    <br><br>

    <h3>Settings</h3>
    <br>

    <div style="padding: 15pt; border: #ccc 1px solid;" ng-if="objs.isEditing">
        <h3>Add new entry</h3>
        <br><br>
        <div class="row">
            <div class="col-md-4">
                <label>Description:</label>
            </div>
            <div class="col-md-8">
                <input type="text" class="form-control" ng-model="objs.form.description">
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-4">
                <label>Type:</label>
            </div>
            <div class="col-md-8">
                <input type="radio" name="sett_name" ng-model="objs.form.type" value="category"> Category <br>
                <input type="radio" name="sett_name" ng-model="objs.form.type" value="worktype"> Work Type <br>
                <input type="radio" name="sett_name" ng-model="objs.form.type" value="projectname"> Project Name
            </div>
        </div>
        <br>
        <div style="text-align:right">
            <input type="button" class="btn btn-primary" ng-click="action(objs.form, 'new')"
                ng-disabled="objs.form.description.length == 0 || objs.form.type.length == 0" value="Save">
            <input type="button" class="btn btn-danger" ng-click="objs.isEditing = false" value="Cancel">
        </div>
    </div>

    <div ng-if="!objs.isEditing">
        <div class="row">
            <div class="col-md-6">
                <div class="settings-div">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="align-right">
                                <input type="button" class="btn btn-purple-color" value="New"
                                    ng-click="objs.addWFtype = true" ng-show="!objs.addWFtype">

                            </div>
                        </div>
                    </div>
                    <div ng-if="objs.addWFtype">
                        <br>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Category</label>
                            </div>
                            <div class="col-md-10">
                                <input type="text" ng-model="objs.worktype.worktypetext" class="form-control">
                                <br>
                                <input type="button" class="btn btn-sm btn-purple-color" ng-click="save_work_type()"
                                    value="Save">
                                <input type="button" class="btn btn-sm btn btn-danger" value="Cancel"
                                    ng-click="objs.addWFtype = false">
                            </div>

                        </div>
                        <hr>
                    </div>

                    <br>

                    <div class="row">
                        <div class="col-md-3">
                            <b>Category ({{objs.worktype.data.length}}):</b>
                        </div>
                        <div class="col-md-9">
                            <p ng-if="objs.worktype.isLoading">
                                ...loading
                            </p>
                            <ul class="list-group " ng-if="!objs.worktype.isLoading"
                                ng-repeat="worktype in objs.worktype.data">
                                <li
                                    class="list-group-item d-flex justify-content-between align-items-center no-border list-group-settings">
                                    {{worktype.description}}
                                    <div style="text-align:right">
                                        <button ng-if="false" class="btn btn-sm btn-primary"
                                            ng-click="remove_work_type(worktype, 'edit')"><i
                                                class="far fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger" ng-click="remove_work_type(worktype)"><i
                                                class="fas fa-minus-circle"></i></button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <br>

            </div>
            <div class="col-md-6">
                <div class="settings-div">
                    <div class="row">
                        <div class="col-md-12">
                            <b>Links:</b>
                            <div class="align-right">
                                <input type="button" class="btn btn-purple-color" value="Link Sub-Category"
                                    ng-show="!objs.addWFtype" data-toggle="modal" data-target="#linkCategorisModal">
                            </div>
                            
                            <hr>
                            <ul class="list-group " ng-if="!objs.categorylinks.isLoading"
                                ng-repeat="link in objs.categorylinks.data">
                                <li
                                    class="list-group-item d-flex justify-content-between align-items-center no-border list-group-settings">
                                    ({{link.worktype}}) - {{link.category}}
                                    <div style="text-align:right">
                                        
                                        <button class="btn btn-sm btn-danger" ng-click="remove_link(link)"><i
                                                class="fas fa-minus-circle"></i></button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="settings-div">
                    <div class="row">
                        <div class="col-md-3">
                            <b>Sub Category({{objs.category.data.length}}):</b>
                        </div>
                        <div class="col-md-9">
                            <p ng-if="objs.category.isLoading">
                                ...loading
                            </p>
                            <ul class="list-group" ng-if="!objs.category.isLoading"
                                ng-repeat="category in objs.category.data">
                                <li
                                    class="list-group-item d-flex justify-content-between align-items-center no-border list-group-settings">
                                    {{category.description}}
                                    <div style="text-align:right">

                                        <button class="btn btn-sm btn-danger" ng-click="remove_subCategory(category)"><i
                                                class="fas fa-minus-circle"></i></button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>


        <div class="row">
            <div class="col-md-12">
                <div class="settings-div">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="align-right">
                                <input type="button" class="btn btn-purple-color" value="New"
                                    ng-click="objs.addProjectName = true" ng-show="!objs.addProjectName">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div ng-if="objs.addProjectName">
                                <br>
                                <div class="row">
                                    <div class="col-md-2">
                                        <label>Project Name:</label>
                                    </div>
                                    <div class="col-md-10">
                                        <input type="text" ng-model="objs.projectname.projectnametext"
                                            class="form-control">
                                        <br>
                                        <input type="button" class="btn btn-sm btn-purple-color"
                                            ng-click="save_project_name()" value="Save">
                                        <input type="button" class="btn btn-sm btn btn-danger" value="Cancel"
                                            ng-click="objs.addProjectName = false">
                                    </div>
                                </div>
                                <hr>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-3">
                            <b>Project Name({{objs.projectname.data.length}}):</b>
                        </div>
                        <div class="col-md-9">
                            <p ng-if="objs.projectname.isLoading">
                                ...loading
                            </p>
                            <ul class="list-group" ng-if="!objs.projectname.isLoading">
                                <li ng-repeat="projectname in objs.projectname.data"
                                    class="list-group-item d-flex justify-content-between align-items-center no-border list-group-settings">
                                    {{projectname.description}}
                                    <div style="text-align:right">
                                        <button class="btn btn-sm btn-danger"
                                            ng-click="remove_project_name(projectname)"><i
                                                class="fas fa-minus-circle"></i></button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!--Link category-->
    <div class="modal fade" id="linkCategorisModal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Link Work type & Categories</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Select Category:</label>
                            <br>
                            <select id="worktype" class="form-control"></select>
                        </div>
                        <div class="col-md-8">
                            <ul class="list-group">
                                <li class="list-group-item" style="font-size: 10pt;"
                                    ng-repeat="cat in objs.category.data">
                                    {{cat.description}}
                                    <span style="float: right;">
                                        <a href="#" ng-click="add_link(cat.id)" class="btn btn-primary btn-sm">+</a>
                                    </span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

    <br>
    <br>
</div>